<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <link type="image/x-icon" rel="icon" href="favicon.ico">
  <link type="image/x-icon" rel="shortcut icon" href="favicon.ico">
  <link rel="stylesheet" href="/pipe.css">
  <link rel="stylesheet" href="/sh_vim-dark.css">
  <script type="text/javascript" src="//use.typekit.net/mse5tqx.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  <title>MemDB</title>
  </head>
  <body id="front">
  <div id="nav">
    <img id="logo" src="/images/logo.png" alt="MemDB">
    <ul>
    <li class="active"><a href="/">Home</a></li>
    <li><a href="/documentation/">Docs</a></li>
    <li><a href="http://forum.memdb.org">Forum</a></li>
    <li><a href="http://blog.memdb.org">Blog</a></li>
    <li><a href="https://github.com/rain1017/memdb">Github</a></li>
    <li><a href="/about/">About</a></li>
    </ul>
  </div>
  <div id="intro">
      <h2>Distributed transactional in memory database</h2>
      <div style='width:50%; float:left'>
      <h3>Performance</h3>
      Data access is mainly based on in process memory, which is extremely fast
      <h3>Scalable</h3>
      System is horizontally scalable by adding more shards.
    </div>
    <div style='width:50%; float:left'>
      <h3>Transaction</h3>
      You can commit/rollback change just like traditional database. 'row' based locking is also supported
      <h3>High Availability</h3>
      Each shard is backed by one or more redis replication, you will never lose any commited data
    </div>

    <p class="version" style='clear:both'>Current Version: v0.2.0</p>

    <div class=buttons>
    <a href="https://github.com/rain1017/memdb/archive/v0.2.0.tar.gz" class="button downloadbutton" id="downloadbutton">INSTALL</a>

    <a href="download/" class=button id="all-dl-options">Downloads</a>
    <a href="api/" class="button" id="docsbutton">API Docs</a>
    </div>
  </div>


<!--     <div id="promo">
    <a href="http://www.joyent.com/noderoad"><img src="images/roadshow-promo.png"></a>
  </div> -->

  <div id="content-wrap">
  <div id="content" class="clearfix">
      <div id="column1">
        <h2>Basic Example</h2>
        <p>Start one shard in in-process mode and use raw api</p>
        <p>You should run on node >= v0.12 with --harmony option</p>
        <p></p>
<pre>
// npm install memdb, bluebird
var memdb = require('memdb');
var P = require('bluebird');

// memdb's config
var config = {
    //shard Id (Must unique and immutable for each shard)
    shard : 's1',
    // Center backend storage, must be same for all shards
    backend : {engine : 'mongodb', url : 'mongodb://localhost/memdb-test'},
    // Center redis used for backendLock, must be same for all shards
    redis : {host : '127.0.0.1', port : 6379},
    // Redis data replication (for current shard)
    slave : {host : '127.0.0.1', port : 6379},
};

P.coroutine(function*(){
    // Start a memdb shard with in-process mode
    yield memdb.startServer(config);

    // Create a new connection
    var conn = yield memdb.connect();
    // Get player collection
    var Player = conn.collection('player');
    // Insert a doc
    var player = {_id : 'p1', name : 'rain', level : 1};
    yield Player.insert(player);
    // Commit changes
    yield Player.commit();
    // Update a field
    yield Player.update(player._id, {$set : {level : 2}});
    // Find the doc (only return specified field)
    console.log(yield Player.find(player._id, 'level')); // should print {level : 2}
    // Rollback changes
    yield conn.rollback();
    // Data restore to last commited state
    console.log(yield Player.find(player._id, 'level')); // should print {level : 1}
    // Remove doc
    yield Player.remove(player._id);
    // close connection
    yield conn.close();

    // stop memdb server
    yield memdb.stopServer();
})();

</pre>
<p>For distributed system, just run memdb in each server with the same config, and each server will be a shard</p>


    </div>
<!--         <div id="column2" class="featured">
      <h2>Featured</h2>
      <a href="/video/"><img src="/images/walmart-thumb.jpg" width="263"></a>
      <h3>Node.js at Walmart</h3>
      <p><a href="http://twitter.com/eranhammer">Eran Hammer</a>, Principal Architect at Walmart, talks about how they use Node.js as a way to reinvent legacy APIs to create modern front end experiences.</p>
    </div> -->
  </div>
  </div>

  <div id="footer">
    <div class="foot-1">
    <a href="http://memdb.org"><h5>The MemDB Project is Sponsored by</h5>
    <img src="/images/logo-footer.jpg">
    </div>
    <div class="foot-2">
    <div class="foot-nav">
      <ul>
      <li><a href="/download/">Downloads</a></li>
      </ul>
      <ul>
      <li><a href="/documentation/">Documentation</a></li>
      <li><a href="/api/">API Docs</a></li>
      <li><a href="/documentation/tutorials/">Tutorials</a></li>
      <li><a href="/documentation/localization/">Localization</a></li>
      </ul>
      <ul>
      <li><a href="/community/">Community</a></li>
      <li><a href="https://github.com/rain1017/memdb/issues">Github Issues</a></li>
      <li><a href="http://groups.google.com/group/memdb">Mailing List</a></li>
      <li><a href="http://webchat.freenode.net/?channels=node.js">IRC</a></li>
      <li><a href="https://twitter.com/memdb">Twitter</a></li>
      </ul>
      <ul>
      <li><a href="/about/">About</a></li>
      <li><a href="/about/organization/">Organization</a></li>
      <li><a href="/about/core-team/">Core Team</a></li>
      <li><a href="/about/resources/">Resources</a></li>
      </ul>
      <ul>
      <li><a href="http://blog.memdb.org">Blog</a></li>
      </ul>
    </div>
    <p class="copyright">Copyright 2015 <a href="http://memdb.org/">Comeplus, Inc</a>, MemDB is a <a href="/images/trademark-policy.pdf">trademark</a> of Comeplus, Inc. <a href="https://github.com/rain1017/memdb/master/LICENSE">View license</a>.</p>
    </div>
  </div>

  <script src="sh_main.js"></script>
  <script src="sh_javascript.min.js"></script>
  <script>highlight(undefined, undefined, 'pre');</script>

  <script src="tracking.js"></script>
  <script src="main.js"></script>
 </body>
</html>
